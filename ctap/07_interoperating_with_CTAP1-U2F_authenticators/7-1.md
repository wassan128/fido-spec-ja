# 7.1 U2Fコマンドのフレーム
U2Fプロトコルはリクエスト-レスポンス機構をベースにしており、リクエストがU2Fデバイスに送られると毎回レスポンスメッセージがU2Fデバイスからリクエスト元に対して送られます。

リクエストメッセージは低レイヤに送るためにフレーム化される必要があります。署名要求を例に取ると、フレーミングはFIDOクライアントが署名要求を送信していることを下位のトランスポート層に伝えるための方法であり、生のメッセージを送信します。また生のメッセージレスポンスやコマンド失敗時のエラーコードなどのメタ情報をどのように返すかについてもフレーミングで示されています。

U2Fの現バージョンにおいては、フレーミングはAPDUフォーマット拡張のISO7816-4-2005をベースに定義されています。これはセキュアエレメント周辺が実装されこのフォーマットを解釈することのできる、USBトランスポートを用いるデバイスによく適合します。これはBluetoothベースのデバイスでも同じことが言えるでしょう。それ以外の、ビルトインのu2fトークンを用いるモバイルデバイス上のTEEのようなトランスポート手法を用いるものについてはこのフレーミングは適さないため、異なるフレーミングが定義される必要があります。

## 7.7.1 U2Fリクエストメッセージフレーミング
生のリクエストメッセージはAPDUコマンドとしてフレームされます。

`CLA INS P1 P2 LC1 LC2 LC3`

CLA: トランスポートプロトコルが使用するために予約されています(該当する場合)。ホストアプリケーションはこのバイトを0にできます。

INS: U2Fコマンドコードであり、次章で定義します。

P1, P2: パラメータ1及び2であり、次章で定義します。

LC1-LC3: リクエストデータの長さをビッグエンディアンでエンコードしたもので、LC1はMSBでLC3はLSBといった形になります。
